<!DOCTYPE html>
<html>
  <head>
    <title>Visual Tests</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta content="utf-8" http-equiv="encoding" />

    <script src="../node_modules/paper/dist/paper-core.js"></script>
    <script src="../node_modules/paperjs-offset/dist/paperjs-offset.min.js"></script>

    <script>
      const svgSquares =
        ' <?xml version="1.0" encoding="UTF-8" standalone="no"?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg width="100%" height="100%" viewBox="0 0 600 600" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"> <g transform="matrix(1.48926,0,0,2.41383,-305.946,-614.034)"> <rect x="299.289" y="314.613" width="306.237" height="186.04" style="fill:rgb(176,219,169);"/> </g> <g transform="matrix(3.29549,0,0,5.53612,-706.322,-1106.49)"> <rect x="216.02" y="200.625" width="138.391" height="81.116" style="fill:rgb(237,115,115);"/> </g> </svg> ';
      const svgComplex =
        '<?xml version="1.0" encoding="UTF-8" standalone="no"?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg width="100%" height="100%" viewBox="0 0 620 600" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"> <g transform="matrix(1.5599,0,0,1.61083,-338.753,-218.91)"> <rect x="299.289" y="314.613" width="306.237" height="186.04" style="fill:rgb(176,219,169);"/> </g> <g transform="matrix(2.11392,0,0,2.11392,-637.381,-267.346)"> <path d="M410.876,129.543L517.491,362.635L304.262,362.635L410.876,129.543Z" style="fill:rgb(52,52,229);"/> </g> <g transform="matrix(0.494053,0,0,2.11392,85.6411,-211.424)"> <rect x="216.02" y="200.625" width="138.391" height="81.116" style="fill:rgb(237,115,115);"/> </g> <g transform="matrix(1.03356,0,0,0.0161591,-23.0494,166.412)"> <g transform="matrix(2.11392,0,0,2.11392,-365.044,-3648.94)"> <rect x="216.02" y="200.625" width="138.391" height="81.116" style="fill:rgb(227,52,229);"/> </g> <g transform="matrix(2.04528,0,0,130.819,-501.977,-25418.8)"> <path d="M262.8,218.238C262.8,218.238 356.387,249.95 396.767,302.488C436.16,353.741 512.886,241.577 512.886,241.577" style="fill:none;stroke:black;stroke-width:1px;"/> </g> </g> <g transform="matrix(1.84616,0,0,2.11392,-474.734,-244.975)"> <ellipse cx="444.76" cy="281.053" rx="74.233" ry="66.374" style="fill:rgb(227,52,229);"/> </g> <g transform="matrix(2.11392,0,0,2.11392,-541.873,-244.334)"> <ellipse cx="403.379" cy="263.173" rx="16.3" ry="16.539" style="fill:rgb(229,223,52);"/> </g> </svg>';
      const svgCircle =
        '<?xml version="1.0" encoding="UTF-8" standalone="no"?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg width="100%" height="100%" viewBox="0 0 600 600" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"> <g transform="matrix(1.48926,0,0,2.41383,-305.946,-614.034)"> <g transform="matrix(0.671474,0,0,0.414279,159.415,225.552)"> <ellipse cx="263.011" cy="267.354" rx="188.672" ry="188.633" style="fill:rgb(255,137,137);"/> </g> <g transform="matrix(0.671474,0,0,0.414279,299.373,310.718)"> <ellipse cx="263.011" cy="267.354" rx="188.672" ry="188.633" style="fill:rgb(155,255,142);"/> </g> <g transform="matrix(0.671474,0,0,0.414279,192.213,265.586)"> <ellipse cx="222.865" cy="367.239" rx="86.155" ry="83.155" style="fill:rgb(122,118,255);"/> </g> </g> </svg> ';
      const svgInnerCircle =
        '<?xml version="1.0" encoding="UTF-8" standalone="no"?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg width="100%" height="100%" viewBox="0 0 620 600" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"> <g transform="matrix(1.14574,0,0,1.272,-192.148,-80.9175)"> <g> <g transform="matrix(3.46582,0,0,3.46582,-1102.98,-674.616)"> <ellipse cx="444.76" cy="281.053" rx="74.233" ry="66.374" style="fill:rgb(227,52,229);"/> </g> <g transform="matrix(1.87732,0,0,1.63952,-206.177,-273.273)"> <path d="M206.132,380.577C206.132,380.577 276.927,244.947 455.978,259.79" style="fill:none;stroke:black;stroke-width:0.47px;"/> </g> <g transform="matrix(1.87732,0,0,1.63952,-199.957,-364.847)"> <path d="M381.063,405.779L413.717,428.931L397.39,450.86L423.808,459.236L411.335,496.696L384.918,488.319L384.918,515.426L344.556,515.426L344.556,488.319L318.138,496.696L305.666,459.236L332.083,450.86L315.756,428.931L348.41,405.779L364.737,427.708L381.063,405.779Z" style="fill:rgb(235,235,235);"/> </g> <g transform="matrix(3.9685,0,0,3.46582,-1229.02,-673.565)"> <ellipse cx="403.379" cy="263.173" rx="16.3" ry="16.539" style="fill:rgb(229,223,52);"/> </g> </g> </g> </svg>';
      const svgGreyCircle =
        '<?xml version="1.0" encoding="UTF-8" standalone="no"?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg width="100%" height="100%" viewBox="0 0 600 600" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"> <g transform="matrix(1.75325,1.75179,-2.02638,2.02807,490.128,-673.263)"> <ellipse cx="159.647" cy="286.791" rx="56.487" ry="48.833" style="fill:rgb(197,197,197);"/> </g> <g transform="matrix(1.75325,1.75179,-2.02638,2.02807,600.561,-562.922)"> <ellipse cx="159.647" cy="286.791" rx="56.487" ry="48.833" style="fill:rgb(150,150,150);"/> </g> <g transform="matrix(1.75325,1.75179,-2.02638,2.02807,713.026,-450.55)"> <ellipse cx="159.647" cy="286.791" rx="56.487" ry="48.833" style="fill:rgb(83,83,83);"/> </g> </svg> ';
      const svgJustCircle =
        '<?xml version="1.0" encoding="UTF-8" standalone="no"?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg width="100%" height="100%" viewBox="0 0 620 600" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"> <g transform="matrix(1.30789,0,0,1.34227,-100.674,-99.6816)"> <ellipse cx="316.038" cy="299.869" rx="191.147" ry="186.252" style="fill:rgb(255,179,179);"/> </g> </svg> ';
      const svgCresent =
        '<?xml version="1.0" encoding="UTF-8" standalone="no"?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg width="100%" height="100%" viewBox="0 0 300 150" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"> <g> <g> <g> <path d="M100.139,49.856C127.465,36.182 171.786,36.173 199.134,49.835C209.577,55.052 216.035,61.508 218.507,68.257C196.65,66.265 173.264,69.496 156.372,77.949C139.48,86.402 133.037,98.098 137.04,109.025C123.539,107.794 110.622,104.571 100.18,99.354C72.832,85.691 72.814,63.53 100.139,49.856Z" style="fill-opacity:0.1;stroke:black;stroke-width:1px;"/> </g> </g> </g> </svg> ';
      const nTest =
        '<?xml version="1.0" encoding="UTF-8" standalone="no"?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg width="100%" height="100%" viewBox="0 0 410 250" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"> <g transform="matrix(2.20729,0,0,2.20729,-629.51,-483.351)"> <path d="M287.194,278.027C287.147,260.836 424.298,239.648 463.621,274.1C502.943,308.553 287.284,310.974 287.194,278.027Z" style="fill:rgb(197,42,42);stroke:black;stroke-width:0.45px;"/> </g> <g transform="matrix(2.20729,0,0,2.20729,-590.115,-499.637)"> <path d="M293.734,309.97C293.734,309.97 293.918,249.574 326.788,251.537C358.842,253.451 360.484,316.988 388.041,318.071C417.163,319.216 405.611,254.806 428.341,255.822" style="fill:none;stroke:black;stroke-width:0.45px;"/> </g> <g transform="matrix(2.20729,0,0,2.20729,-637.573,-458.77)"> <path d="M400.05,215.707C400.05,215.707 331.785,188.776 337.215,288.888C338.54,313.328 342.142,315.747 350.572,316.474C360.619,317.341 357.785,292.716 357.995,288.693C358.628,276.587 356.03,251.551 365.842,242.768C375.363,234.245 386.317,232.478 396.885,243.876C405.549,253.22 403.614,279.589 404.026,287.569C404.464,296.041 404.817,315.237 414.526,314.945C423.731,314.668 423.467,285.354 423.467,285.354C423.467,285.354 431.595,228.692 400.05,215.707Z" style="fill:rgb(42,78,197);stroke:black;stroke-width:0.45px;"/> </g> </svg>';
      const multiTest =
        '<?xml version="1.0" encoding="UTF-8" standalone="no"?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg width="100%" height="100%" viewBox="0 0 550 500" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"> <g transform="matrix(1,0,0,1,-93.7947,9.53435)"> <g transform="matrix(1,0,0,1,93.7947,-9.53435)"> <path d="M128.09,221.956L193.525,352.6L62.655,352.6L128.09,221.956ZM94.336,322.537L103.61,344.88L85.063,344.88L94.336,322.537ZM124.085,315.187L138.419,344.764L109.751,344.764L124.085,315.187Z" style="fill:rgb(255,133,133);"/> </g> <g transform="matrix(1,0,0,1,98.0286,-1.80643)"> <path d="M162.575,291.254L189.612,345.001L135.537,345.001L162.575,291.254Z" style="fill:rgb(235,235,235);"/> </g> <g transform="matrix(1,0,0,1,106.394,1.50514)"> <ellipse cx="128.083" cy="287.412" rx="8.189" ry="8.523" style="fill:rgb(212,85,85);"/> </g> </g> <g transform="matrix(1,0,0,1,-89.052,-18.3544)"> <ellipse cx="391.552" cy="305.749" rx="55.133" ry="55.042" style="fill:rgb(198,255,133);"/> </g> <g transform="matrix(1,0,0,1,-157.836,-19.6277)"> <path d="M478.867,236.162L519.291,265.527L499.079,293.341L531.782,303.966L516.342,351.479L483.638,340.854L483.638,375.235L433.672,375.235L433.672,340.854L400.969,351.479L385.528,303.966L418.232,293.341L398.02,265.527L438.443,236.162L458.655,263.977L478.867,236.162Z" style="fill:rgb(133,191,255);"/> </g> <g transform="matrix(1,0,0,1,-128.413,10.5283)"> <ellipse cx="249.859" cy="129.469" rx="65.269" ry="65.239" style="fill:rgb(133,191,255);"/> </g> <g transform="matrix(1,0,0,1,-92.1205,17.2525)"> <path d="M137.619,94.318C137.619,94.318 97.46,138.61 129.275,146.727C161.091,154.843 172.117,103.29 207.828,105.458C243.539,107.625 305.238,136.747 287.492,160.297C269.745,183.847 242.828,167.951 215.93,162.859C189.033,157.767 187.121,125.211 168.022,94.539C148.923,63.867 137.904,60.739 137.904,60.739" style="fill:none;stroke:black;stroke-width:1px;"/> </g> <g> <path d="M115.86,104.18C141.063,104.18 161.524,124.626 161.524,149.809C161.524,174.993 141.063,195.439 115.86,195.439C90.658,195.439 70.196,174.993 70.196,149.809C70.196,124.626 90.658,104.18 115.86,104.18ZM95.611,122.575C104.089,122.575 110.973,129.46 110.973,137.94C110.973,146.421 104.089,153.306 95.611,153.306C87.133,153.306 80.249,146.421 80.249,137.94C80.249,129.46 87.133,122.575 95.611,122.575Z" style="fill:rgb(255,233,133);"/> </g> <g transform="matrix(1,0,0,1,-91.4195,18.641)"> <rect x="334.835" y="68.755" width="104.482" height="104.85" style="fill:rgb(198,255,133);"/> </g> <g transform="matrix(0.774166,0.632983,-0.632983,0.774166,106.725,-230.762)"> <rect x="334.835" y="68.755" width="104.482" height="104.85" style="fill:rgb(255,224,133);"/> </g> <g transform="matrix(1,0,0,1,-93.7947,9.53435)"> <path d="M541.167,89.631L611.438,181.526L614.561,90.616L539.659,176.723L541.167,89.631Z" style="fill:rgb(223,133,255);stroke:rgb(224,128,255);stroke-width:1px;"/> </g> <g transform="matrix(1,0,0,1,-103.888,12.6563)"> <rect x="371.018" y="112.027" width="17.515" height="18.031" style="fill:rgb(223,133,255);"/> </g> <g transform="matrix(0.913705,0,0,0.934433,-41.6249,29.836)"> <ellipse cx="566.16" cy="272.155" rx="38.39" ry="37.478" style="fill:rgb(171,255,178);"/> </g> <g transform="matrix(1,0,0,1,-93.7947,9.53435)"> <path d="M618.085,222.827L518.382,222.827L518.382,321.449L618.085,321.449L618.085,222.827ZM579.752,237.773L600.858,253.19L590.305,267.794L607.38,273.372L599.318,298.318L582.243,292.74L582.243,310.791L556.155,310.791L556.155,292.74L539.08,298.318L531.018,273.372L548.093,267.794L537.54,253.19L558.646,237.773L569.199,252.376L579.752,237.773Z" style="fill:rgb(223,133,255);"/> </g> <g transform="matrix(2.70808,0,0,2.70808,-307.576,-624.895)"> <g transform="matrix(30,0,0,30,126.147,396.464)"> <path d="M0.122,-0.125L0.368,-0.737L0.4,-0.737L0.66,-0.077C0.669,-0.05 0.69,-0.037 0.723,-0.037L0.745,-0.037L0.745,-0L0.458,-0L0.458,-0.037L0.481,-0.037C0.532,-0.037 0.557,-0.047 0.557,-0.067C0.557,-0.073 0.556,-0.079 0.553,-0.085L0.494,-0.239L0.208,-0.239L0.175,-0.15C0.169,-0.135 0.166,-0.125 0.165,-0.121C0.162,-0.111 0.161,-0.101 0.161,-0.092C0.161,-0.077 0.169,-0.065 0.185,-0.054C0.201,-0.043 0.222,-0.037 0.249,-0.037L0.273,-0.037L0.273,-0L0.012,-0L0.012,-0.037L0.02,-0.037C0.064,-0.037 0.099,-0.066 0.122,-0.125ZM0.479,-0.276L0.353,-0.597L0.224,-0.276L0.479,-0.276Z" style="fill-rule:nonzero;"/> </g> <g transform="matrix(30,0,0,30,148.918,396.464)"> <path d="M0.02,-0.425L0.02,-0.458L0.172,-0.465C0.176,-0.445 0.18,-0.426 0.182,-0.41C0.184,-0.394 0.185,-0.38 0.185,-0.366C0.226,-0.432 0.281,-0.465 0.352,-0.465C0.398,-0.465 0.433,-0.451 0.459,-0.422C0.484,-0.394 0.497,-0.354 0.497,-0.304L0.497,-0.082C0.497,-0.066 0.5,-0.054 0.507,-0.047C0.514,-0.04 0.526,-0.037 0.544,-0.037L0.578,-0.037L0.578,-0L0.336,-0L0.336,-0.037L0.358,-0.037C0.396,-0.037 0.416,-0.051 0.416,-0.078L0.416,-0.273C0.416,-0.366 0.381,-0.412 0.313,-0.412C0.277,-0.412 0.247,-0.397 0.222,-0.368C0.198,-0.339 0.185,-0.3 0.185,-0.252L0.185,-0.082C0.185,-0.065 0.189,-0.053 0.196,-0.047C0.203,-0.04 0.216,-0.037 0.235,-0.037L0.266,-0.037L0.266,-0L0.024,-0L0.024,-0.037L0.056,-0.037C0.088,-0.037 0.104,-0.048 0.104,-0.071L0.104,-0.366C0.104,-0.406 0.084,-0.425 0.044,-0.425L0.02,-0.425Z" style="fill-rule:nonzero;"/> </g> <g transform="matrix(30,0,0,30,166.684,396.464)"> <path d="M0.369,-0L0.357,-0.093C0.319,-0.026 0.269,0.008 0.209,0.008C0.155,0.008 0.111,-0.014 0.075,-0.059C0.039,-0.104 0.021,-0.161 0.021,-0.231C0.021,-0.301 0.041,-0.358 0.079,-0.402C0.117,-0.447 0.164,-0.469 0.218,-0.469C0.277,-0.469 0.323,-0.44 0.357,-0.382L0.357,-0.64C0.357,-0.67 0.335,-0.685 0.291,-0.685L0.26,-0.685L0.26,-0.721L0.438,-0.731L0.438,-0.105C0.438,-0.06 0.456,-0.037 0.493,-0.037L0.525,-0.037L0.525,-0L0.369,-0ZM0.23,-0.431C0.153,-0.431 0.115,-0.369 0.115,-0.245C0.115,-0.106 0.153,-0.037 0.229,-0.037C0.267,-0.037 0.298,-0.055 0.321,-0.092C0.345,-0.128 0.357,-0.179 0.357,-0.244C0.357,-0.3 0.345,-0.345 0.321,-0.38C0.297,-0.414 0.267,-0.431 0.23,-0.431Z" style="fill-rule:nonzero;"/> </g> </g> <g transform="matrix(1,0,0,1,-284.626,28.0283)"> <path d="M691.242,346.575L493.268,346.575L493.268,441.229L691.242,441.229L691.242,346.575ZM656.61,424.169L655.659,416.639C652.541,422.082 648.525,424.803 643.611,424.803C639.278,424.803 635.659,422.993 632.752,419.374C629.846,415.754 628.393,411.091 628.393,405.384C628.393,399.73 629.952,395.093 633.069,391.474C636.187,387.854 639.939,386.044 644.324,386.044C649.133,386.044 652.911,388.396 655.659,393.099L655.659,372.174C655.659,369.743 653.862,368.528 650.269,368.528L647.733,368.528L647.733,365.595L662.237,364.802L662.237,415.609C662.237,419.307 663.717,421.157 666.676,421.157L669.292,421.157L669.292,424.169L656.61,424.169ZM526.781,414.023L546.754,364.327L549.37,364.327L570.453,417.907C571.246,420.074 572.963,421.157 575.605,421.157L577.428,421.157L577.428,424.169L554.046,424.169L554.046,421.157L555.949,421.157C560.07,421.157 562.131,420.338 562.131,418.7C562.131,418.224 562.025,417.749 561.814,417.273L556.979,404.75L533.755,404.75L531.061,411.963C530.585,413.231 530.321,414.023 530.268,414.34C530.057,415.133 529.951,415.926 529.951,416.718C529.951,417.881 530.598,418.911 531.893,419.809C533.187,420.708 534.918,421.157 537.084,421.157L539.066,421.157L539.066,424.169L517.824,424.169L517.824,421.157L518.458,421.157C522.104,421.157 524.878,418.779 526.781,414.023ZM580.123,389.611L580.123,386.995L592.488,386.361C592.858,388.052 593.135,389.545 593.32,390.84C593.505,392.134 593.597,393.336 593.597,394.446C596.874,389.056 601.391,386.361 607.151,386.361C610.85,386.361 613.73,387.524 615.791,389.849C617.851,392.174 618.882,395.371 618.882,399.439L618.882,417.511C618.882,418.832 619.159,419.77 619.714,420.325C620.269,420.879 621.286,421.157 622.765,421.157L625.46,421.157L625.46,424.169L605.804,424.169L605.804,421.157L607.627,421.157C610.744,421.157 612.303,420.047 612.303,417.828L612.303,401.976C612.303,394.472 609.529,390.721 603.981,390.721C601.074,390.721 598.617,391.91 596.609,394.287C594.601,396.665 593.597,399.809 593.597,403.719L593.597,417.511C593.597,418.885 593.888,419.836 594.469,420.364C595.051,420.893 596.107,421.157 597.64,421.157L600.176,421.157L600.176,424.169L580.519,424.169L580.519,421.157L583.056,421.157C585.698,421.157 587.019,420.232 587.019,418.383L587.019,394.446C587.019,391.223 585.381,389.611 582.105,389.611L580.123,389.611ZM645.355,389.135C639.12,389.135 636.002,394.182 636.002,404.274C636.002,415.529 639.093,421.157 645.276,421.157C648.34,421.157 650.837,419.677 652.766,416.718C654.694,413.759 655.659,409.638 655.659,404.354C655.659,399.809 654.681,396.137 652.726,393.336C650.771,390.536 648.314,389.135 645.355,389.135ZM555.79,401.738L545.565,375.661L535.103,401.738L555.79,401.738Z" style="fill:rgb(171,255,178);"/> </g> <rect x="430.457" y="380.828" width="88.013" height="6.742" style="fill:rgb(255,128,128);"/> <g transform="matrix(1,0,0,1,0.944816,-2.20573)"> <rect x="510.813" y="382.73" width="6.578" height="73.178" style="fill:rgb(255,128,128);"/> </g> <rect x="435.004" y="439.826" width="89.582" height="7.357" style="fill:rgb(255,128,128);"/> <g transform="matrix(1,0,0,1,-28.3309,25.2232)"> <ellipse cx="481.486" cy="416.244" rx="11.306" ry="11.028" style="fill:rgb(156,255,158);"/> </g> <g transform="matrix(1,0,0,1,2.40264,0.517642)"> <rect x="447.708" y="402.035" width="7.055" height="56.685" style="fill:rgb(255,128,128);"/> </g> </svg>';
      //'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg width="100%" height="100%" viewBox="0 0 550 500" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"> <g transform="matrix(1,0,0,1,-93.7947,9.53435)"> <g transform="matrix(1,0,0,1,93.7947,-9.53435)"> <path d="M128.09,221.956L193.525,352.6L62.655,352.6L128.09,221.956ZM94.336,322.537L103.61,344.88L85.063,344.88L94.336,322.537ZM124.085,315.187L138.419,344.764L109.751,344.764L124.085,315.187Z" style="fill:rgb(255,133,133);"/> </g> <g transform="matrix(1,0,0,1,98.0286,-1.80643)"> <path d="M162.575,291.254L189.612,345.001L135.537,345.001L162.575,291.254Z" style="fill:rgb(235,235,235);"/> </g> <g transform="matrix(1,0,0,1,106.394,1.50514)"> <ellipse cx="128.083" cy="287.412" rx="8.189" ry="8.523" style="fill:rgb(212,85,85);"/> </g> </g> <g transform="matrix(1,0,0,1,-89.052,-18.3544)"> <ellipse cx="391.552" cy="305.749" rx="55.133" ry="55.042" style="fill:rgb(198,255,133);"/> </g> <g transform="matrix(1,0,0,1,-157.836,-19.6277)"> <path d="M478.867,236.162L519.291,265.527L499.079,293.341L531.782,303.966L516.342,351.479L483.638,340.854L483.638,375.235L433.672,375.235L433.672,340.854L400.969,351.479L385.528,303.966L418.232,293.341L398.02,265.527L438.443,236.162L458.655,263.977L478.867,236.162Z" style="fill:rgb(133,191,255);"/> </g> <g transform="matrix(1,0,0,1,-128.413,10.5283)"> <ellipse cx="249.859" cy="129.469" rx="65.269" ry="65.239" style="fill:rgb(133,191,255);"/> </g> <g transform="matrix(1,0,0,1,-92.1205,17.2525)"> <path d="M137.619,94.318C137.619,94.318 97.46,138.61 129.275,146.727C161.091,154.843 172.117,103.29 207.828,105.458C243.539,107.625 305.238,136.747 287.492,160.297C269.745,183.847 242.828,167.951 215.93,162.859C189.033,157.767 187.121,125.211 168.022,94.539C148.923,63.867 137.904,60.739 137.904,60.739" style="fill:none;stroke:black;stroke-width:1px;"/> </g> <g> <path d="M115.86,104.18C141.063,104.18 161.524,124.626 161.524,149.809C161.524,174.993 141.063,195.439 115.86,195.439C90.658,195.439 70.196,174.993 70.196,149.809C70.196,124.626 90.658,104.18 115.86,104.18ZM95.611,122.575C104.089,122.575 110.973,129.46 110.973,137.94C110.973,146.421 104.089,153.306 95.611,153.306C87.133,153.306 80.249,146.421 80.249,137.94C80.249,129.46 87.133,122.575 95.611,122.575Z" style="fill:rgb(255,233,133);"/> </g> <g transform="matrix(1,0,0,1,-91.4195,18.641)"> <rect x="334.835" y="68.755" width="104.482" height="104.85" style="fill:rgb(198,255,133);"/> </g> <g transform="matrix(0.774166,0.632983,-0.632983,0.774166,106.725,-230.762)"> <rect x="334.835" y="68.755" width="104.482" height="104.85" style="fill:rgb(255,224,133);"/> </g> <g transform="matrix(1,0,0,1,-93.7947,9.53435)"> <path d="M541.167,89.631L611.438,181.526L614.561,90.616L539.659,176.723L541.167,89.631Z" style="fill:rgb(223,133,255);stroke:rgb(224,128,255);stroke-width:1px;"/> </g> <g transform="matrix(1,0,0,1,-103.888,12.6563)"> <rect x="371.018" y="112.027" width="17.515" height="18.031" style="fill:rgb(223,133,255);"/> </g> <g transform="matrix(0.913705,0,0,0.934433,-41.6249,29.836)"> <ellipse cx="566.16" cy="272.155" rx="38.39" ry="37.478" style="fill:rgb(171,255,178);"/> </g> <g transform="matrix(1,0,0,1,-93.7947,9.53435)"> <path d="M618.085,222.827L518.382,222.827L518.382,321.449L618.085,321.449L618.085,222.827ZM579.752,237.773L600.858,253.19L590.305,267.794L607.38,273.372L599.318,298.318L582.243,292.74L582.243,310.791L556.155,310.791L556.155,292.74L539.08,298.318L531.018,273.372L548.093,267.794L537.54,253.19L558.646,237.773L569.199,252.376L579.752,237.773Z" style="fill:rgb(223,133,255);"/> </g> <g transform="matrix(2.70808,0,0,2.70808,-307.576,-624.895)"> <g transform="matrix(30,0,0,30,126.147,396.464)"> <path d="M0.122,-0.125L0.368,-0.737L0.4,-0.737L0.66,-0.077C0.669,-0.05 0.69,-0.037 0.723,-0.037L0.745,-0.037L0.745,-0L0.458,-0L0.458,-0.037L0.481,-0.037C0.532,-0.037 0.557,-0.047 0.557,-0.067C0.557,-0.073 0.556,-0.079 0.553,-0.085L0.494,-0.239L0.208,-0.239L0.175,-0.15C0.169,-0.135 0.166,-0.125 0.165,-0.121C0.162,-0.111 0.161,-0.101 0.161,-0.092C0.161,-0.077 0.169,-0.065 0.185,-0.054C0.201,-0.043 0.222,-0.037 0.249,-0.037L0.273,-0.037L0.273,-0L0.012,-0L0.012,-0.037L0.02,-0.037C0.064,-0.037 0.099,-0.066 0.122,-0.125ZM0.479,-0.276L0.353,-0.597L0.224,-0.276L0.479,-0.276Z" style="fill-rule:nonzero;"/> </g> <g transform="matrix(30,0,0,30,148.918,396.464)"> <path d="M0.02,-0.425L0.02,-0.458L0.172,-0.465C0.176,-0.445 0.18,-0.426 0.182,-0.41C0.184,-0.394 0.185,-0.38 0.185,-0.366C0.226,-0.432 0.281,-0.465 0.352,-0.465C0.398,-0.465 0.433,-0.451 0.459,-0.422C0.484,-0.394 0.497,-0.354 0.497,-0.304L0.497,-0.082C0.497,-0.066 0.5,-0.054 0.507,-0.047C0.514,-0.04 0.526,-0.037 0.544,-0.037L0.578,-0.037L0.578,-0L0.336,-0L0.336,-0.037L0.358,-0.037C0.396,-0.037 0.416,-0.051 0.416,-0.078L0.416,-0.273C0.416,-0.366 0.381,-0.412 0.313,-0.412C0.277,-0.412 0.247,-0.397 0.222,-0.368C0.198,-0.339 0.185,-0.3 0.185,-0.252L0.185,-0.082C0.185,-0.065 0.189,-0.053 0.196,-0.047C0.203,-0.04 0.216,-0.037 0.235,-0.037L0.266,-0.037L0.266,-0L0.024,-0L0.024,-0.037L0.056,-0.037C0.088,-0.037 0.104,-0.048 0.104,-0.071L0.104,-0.366C0.104,-0.406 0.084,-0.425 0.044,-0.425L0.02,-0.425Z" style="fill-rule:nonzero;"/> </g> <g transform="matrix(30,0,0,30,166.684,396.464)"> <path d="M0.369,-0L0.357,-0.093C0.319,-0.026 0.269,0.008 0.209,0.008C0.155,0.008 0.111,-0.014 0.075,-0.059C0.039,-0.104 0.021,-0.161 0.021,-0.231C0.021,-0.301 0.041,-0.358 0.079,-0.402C0.117,-0.447 0.164,-0.469 0.218,-0.469C0.277,-0.469 0.323,-0.44 0.357,-0.382L0.357,-0.64C0.357,-0.67 0.335,-0.685 0.291,-0.685L0.26,-0.685L0.26,-0.721L0.438,-0.731L0.438,-0.105C0.438,-0.06 0.456,-0.037 0.493,-0.037L0.525,-0.037L0.525,-0L0.369,-0ZM0.23,-0.431C0.153,-0.431 0.115,-0.369 0.115,-0.245C0.115,-0.106 0.153,-0.037 0.229,-0.037C0.267,-0.037 0.298,-0.055 0.321,-0.092C0.345,-0.128 0.357,-0.179 0.357,-0.244C0.357,-0.3 0.345,-0.345 0.321,-0.38C0.297,-0.414 0.267,-0.431 0.23,-0.431Z" style="fill-rule:nonzero;"/> </g> </g> <g transform="matrix(1,0,0,1,-284.626,28.0283)"> <path d="M691.242,346.575L493.268,346.575L493.268,441.229L691.242,441.229L691.242,346.575ZM656.61,424.169L655.659,416.639C652.541,422.082 648.525,424.803 643.611,424.803C639.278,424.803 635.659,422.993 632.752,419.374C629.846,415.754 628.393,411.091 628.393,405.384C628.393,399.73 629.952,395.093 633.069,391.474C636.187,387.854 639.939,386.044 644.324,386.044C649.133,386.044 652.911,388.396 655.659,393.099L655.659,372.174C655.659,369.743 653.862,368.528 650.269,368.528L647.733,368.528L647.733,365.595L662.237,364.802L662.237,415.609C662.237,419.307 663.717,421.157 666.676,421.157L669.292,421.157L669.292,424.169L656.61,424.169ZM526.781,414.023L546.754,364.327L549.37,364.327L570.453,417.907C571.246,420.074 572.963,421.157 575.605,421.157L577.428,421.157L577.428,424.169L554.046,424.169L554.046,421.157L555.949,421.157C560.07,421.157 562.131,420.338 562.131,418.7C562.131,418.224 562.025,417.749 561.814,417.273L556.979,404.75L533.755,404.75L531.061,411.963C530.585,413.231 530.321,414.023 530.268,414.34C530.057,415.133 529.951,415.926 529.951,416.718C529.951,417.881 530.598,418.911 531.893,419.809C533.187,420.708 534.918,421.157 537.084,421.157L539.066,421.157L539.066,424.169L517.824,424.169L517.824,421.157L518.458,421.157C522.104,421.157 524.878,418.779 526.781,414.023ZM580.123,389.611L580.123,386.995L592.488,386.361C592.858,388.052 593.135,389.545 593.32,390.84C593.505,392.134 593.597,393.336 593.597,394.446C596.874,389.056 601.391,386.361 607.151,386.361C610.85,386.361 613.73,387.524 615.791,389.849C617.851,392.174 618.882,395.371 618.882,399.439L618.882,417.511C618.882,418.832 619.159,419.77 619.714,420.325C620.269,420.879 621.286,421.157 622.765,421.157L625.46,421.157L625.46,424.169L605.804,424.169L605.804,421.157L607.627,421.157C610.744,421.157 612.303,420.047 612.303,417.828L612.303,401.976C612.303,394.472 609.529,390.721 603.981,390.721C601.074,390.721 598.617,391.91 596.609,394.287C594.601,396.665 593.597,399.809 593.597,403.719L593.597,417.511C593.597,418.885 593.888,419.836 594.469,420.364C595.051,420.893 596.107,421.157 597.64,421.157L600.176,421.157L600.176,424.169L580.519,424.169L580.519,421.157L583.056,421.157C585.698,421.157 587.019,420.232 587.019,418.383L587.019,394.446C587.019,391.223 585.381,389.611 582.105,389.611L580.123,389.611ZM645.355,389.135C639.12,389.135 636.002,394.182 636.002,404.274C636.002,415.529 639.093,421.157 645.276,421.157C648.34,421.157 650.837,419.677 652.766,416.718C654.694,413.759 655.659,409.638 655.659,404.354C655.659,399.809 654.681,396.137 652.726,393.336C650.771,390.536 648.314,389.135 645.355,389.135ZM555.79,401.738L545.565,375.661L535.103,401.738L555.79,401.738Z" style="fill:rgb(171,255,178);"/> </g> </svg>';
    </script>

    <style>
      body {
        display: flex;
        flex-direction: column;
        background: aliceblue;
        margin: 2em;
      }

      canvas {
        margin: 1em;
        width: 1100px;
        height: 1000px;
      }
    </style>

    <script type="module">
      import { occultAndFill } from "../src/main.mjs";

      window.onload = function () {
        [
          multiTest,
          // svgComplex,
          // nTest,
          // svgJustCircle,
          // svgGreyCircle,
          // svgInnerCircle,
          // svgSquares,
          // svgCircle,
          // svgCresent,
        ].forEach(test);
      };

      function test(svgString) {
        const container = document.createElement("div");
        const fillCanvas = document.createElement("canvas");
        const occultCanvas = document.createElement("canvas");
        container.append(fillCanvas, occultCanvas);
        document.body.appendChild(container);

        paper.setup(fillCanvas);
        paper.project.importSVG(svgString, {
          expandShapes: true,
          insert: false,
          onLoad: async function (item) {
            await occultAndFill(item, {
              fillType: "snake",
              spacing: 2,
              inset: true,
              union: true,
              occult: true,
              autoClosePaths: true,
            });

            const link = document.createElement("a");
            link.innerText = "Save As...";
            link.download = "test.svg";
            link.href =
              "data:image/svg+xml;charset=utf-8," +
              encodeURIComponent(paper.project.exportSVG({ asString: true }));
            document.querySelector("#heading").appendChild(link);
          },
          onError: console.error,
        });
      }
    </script>
  </head>
  <body>
    <div id="heading">
      <h1>Plotter Fill Visual Tests</h1>
      <a href="index.html">unit tests</a>
    </div>
  </body>
</html>
